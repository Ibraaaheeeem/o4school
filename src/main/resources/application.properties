spring.application.name=4school
server.port=8080
server.error.whitelabel.enabled=false
server.error.include-stacktrace=never


# Virtual Threads (Java 21+)
spring.threads.virtual.enabled=true

# PostgreSQL Configuration
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/myschool}
spring.datasource.username=${DB_USERNAME:abuhaneefayn}
spring.datasource.password=${DB_PASSWORD:pass}
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
# Disable runtime bytecode provider (essential for Native)
spring.jpa.properties.hibernate.bytecode.provider=none

# Optional: Improve startup by disabling dynamic metadata lookups
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false

# If you still see the error, force Jakarta-based scanning
spring.jpa.properties.hibernate.bytecode.reflection_optimizer=true
# H2 Database configuration (commented out)
# spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1
# spring.datasource.driverClassName=org.h2.Driver
# spring.datasource.username=sa
# spring.datasource.password=password
# spring.h2.console.enabled=true
# spring.h2.console.path=/h2-console
# spring.h2.console.settings.web-allow-others=true
# spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
# spring.jpa.hibernate.ddl-auto=create-drop
spring.thymeleaf.cache=false

# Hibernate Properties
spring.jpa.properties.hibernate.default_batch_fetch_size=50

# JWT Configuration
jwt.secret=${JWT_SECRET:mySecretKeyForJWTTokenGenerationAndValidation2024SchoolManagementSystem}
jwt.expiration=86400000

# DevTools configuration for auto-restart
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true
spring.devtools.restart.additional-paths=src/main/resources
spring.devtools.restart.exclude=static/**,public/**

# Optional: Enable debug logging for development
logging.level.com.haneef._school=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.security.web.access=DEBUG
logging.level.org.springframework.security.access=DEBUG

# File Upload Configuration
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.enabled=true
spring.servlet.multipart.file-size-threshold=0
app.upload.dir=uploads
app.upload.max-file-size=5242880

# Tomcat configuration to fix FileCountLimitExceededException
server.tomcat.connection-timeout=60000
server.tomcat.max-http-form-post-size=10MB
server.tomcat.max-parameter-count=10000

# Paystack Configuration
paystack.secret.key=${PAYSTACK_SECRET_KEY:sk_live}
paystack.public.key=${PAYSTACK_PUBLIC_KEY:pk_live}
paystack.api.url=https://api.paystack.co

management.endpoints.web.exposure.include=health,prometheus,heapdump
management.endpoint.health.show-details=when_authorized

# Email Configuration (Zoho SMTP)
spring.mail.host=${SMTP_SERVER:smtp.zoho.com}
spring.mail.port=${SMTP_PORT:587}
spring.mail.username=${SMTP_USERNAME:}
spring.mail.password=${SMTP_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.from=${SENDER_EMAIL:admin@4school.app}
